<!DOCTYPE html>
<html>
<head>
<title>Magnifier Demo</title>

<link href="magnifier.css" type="text/css" rel="stylesheet" />
<link href="magnifier_doc.css" type="text/css" rel="stylesheet" />

</head>
<body>

<h1>Javascript Magnifier Demo</h1>

<p>Inspired by <a href="https://www.javascriptsource.com/repository/javascripts/2005/03/660841/vergrootglas.html">this
page</a>, but there's pretty much no original code left. Many thanks
to Gerard Talbot and 'dhtml' on the <code>comp.lang.javascript</code> newsgroup
for many pointers, critiques, and ideas, and to Josh Hillier who helped extend
this to work with touch events.
</p>

<h2 id="loadmag">Getting the code</h2>

<p>To use, include the following in the head or body of your web page:</p>

<blockquote><pre>&lt;link type=&quot;text/css&quot; href=&quot;magnifier.css&quot; rel=&quot;stylesheet&quot;&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;magnifier.js&quot;&gt;&lt;/script&gt;
</pre></blockquote>

<p>You can get these two files by using your browser's "save as web page complete" option to
  save this web page. You can also get them from 
  <a href="https://github.com/criesbeck/magnifier" target="_blank">github</a>.
</p>

<h2>Simple 2X Magnifier</h2>

<p>Move the mouse cursor over the image below, or touch and move your finger over it.</p>

<div>
  <img src="deloitte-agile-map-large.jpg" class="maglarge" alt="deloitte agile map">
  <p><a href="https://imgur.com/NzT6Bch" target="_blank">Image source</a></p>
</div>

<p>Here's the HTML:</p>

<blockquote><pre>&lt;div>
  <strong>&lt;img src="deloitte-agile-map-large.jpg" class="maglarge" alt="deloitte agile map" /></strong>
  &lt;p>&lt;a href="https://imgur.com/NzT6Bch" target="_blank">Source&lt;/a>&lt;/p>
&lt;/div></pre></blockquote>

<p>
  Any image marked with the <strong>class</strong> <code>maglarge</code> will
  get a 2X magnifier. That means a half-size image will be displayed, and
  the magnifying lens will show the actual full-size detail.
</p>

<h2>Custom Magnifier Power</h2>

<p>
  To get a different level of magnification, add
  a <strong>data-power</strong> attribute to the image. For example, 
  here's the same image, at one-third size, with a 3X lens.
</p>

<div>
  <img src="deloitte-agile-map-large.jpg" class="maglarge" data-power="3" alt="deloitte agile map">
  <p><a href="https://imgur.com/NzT6Bch" target="_blank">Image source</a></p>
</div>

<p>
  The HTML is:
</p>

<blockquote><pre>&lt;div>
  &lt;img src="deloitte-agile-map-large.jpg" class="maglarge" <strong>data-power="3"</strong> alt="deloitte agile map">
  &lt;p>&lt;a href="https://imgur.com/NzT6Bch" target="_blank">Source&lt;/a>&lt;/p>
&lt;/div></pre></blockquote>

<h2>Styling the page image</h2>

<p>
  If you want to style the <code>DIV</code> that displays the smaller image, use this HTML 
  pattern:
</p>

<blockquote><pre>&lt;div <b>class=&quot;magnifier&quot;</b> style=&quot;width: <em>sw</em>px; height: <em>sh</em>px;&quot;&gt;
  &lt;div <b>class=&quot;maglens&quot;</b>&gt;
    &lt;img src=&quot;<em>image-file</em>&quot; <b>class=&quot;maglarge&quot;</b> style=&quot;width: <em>lw</em>px; height: <em>lh</em>px;&quot;&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></blockquote>

<div class="magnifier" style="width:447px;margin-left:0.5em;border:2px solid gray;padding:5px;float:right">
  <div class="maglens">
   <img src="deloitte-agile-map-large.jpg" class="maglarge" alt="deloitte agile map">
  </div>
</div>

<p>
  This is what JavaScript wraps around your image automatically, if
  it's not given explicitly.
</p>
<p>
  <em>lw</em> and <em>lh</em> on the image with
  the <strong>class</strong> <code>maglarge</code>
  are the width and height of the image that will
  be shown in the magnifier lens.
  If omitted, the width and height of the source image is used.
</p>

<p>
  <em>sw</em> and <em>sh</em> on the outer <code>DIV</code> 
  with the <strong>class</strong> <code>magnifier</code>
  give the width and height of the smaller image that
  appears on the page. If only a width or height are given,
  a proportional value for the other
  will be calculated.
</p>

<p>
  Here's an image with a magnifier inside a bordered box, aligned
  to the right side of the page. The HTML is:
</p>

<pre>&lt;div class="magnifier" 
  style="width:447px;margin-left:0.5em;border:2px solid gray;padding:5px;float:right">
  &lt;div class="maglens">
   &lt;img src="deloitte-agile-map-large.jpg" class="maglarge" alt="deloitte agile map">
  &lt;/div>
&lt;/div></pre>

<br style="clear:both">

<h3>Custom Image Pairs</h3>

<p>
  With the general HTML pattern, you can specify an image to display
  instead of a reduced version of the <code>maglarge</code> image.
  This can be used for an X-ray or augmented reality effect.
  Here's an example, using
  images are from
  <a href="https://chandra.harvard.edu/photo/2002/0157/more.html" target="_blank">
  the Chandra X-ray Observatory</a>, 
  showing what a galaxy looks like in the X-ray spectrum. 
</p>

<div style="float:left;margin-right:2em;">
  <div class="magnifier" style="width: 288px; height: 269px;">
    <img class="magsmall" src="0157_optical.jpg" alt="optical view" />
    <div class="maglens" style="width:100px; height:75px">
      <img class="maglarge" src="0157_xray.jpg" alt="x-ray view"
        style="width: 288px; height: 269px" />
    </div>
  </div>
</div>

<p>Here's the HTML:</p>
    
<blockquote><pre>
&lt;div class=&quot;magnifier&quot; style=&quot;width: 288px; height: 269px&quot;&gt;
  &lt;img class=&quot;magsmall&quot; src=&quot;0157_optical.jpg&quot; alt=&quot;optical view&quot; /&gt;
  &lt;div class=&quot;maglens&quot; style=&quot;width:100px; height:75px&quot;&gt;
    &lt;img class=&quot;maglarge&quot; src=&quot;0157_xray.jpg&quot; alt=&quot;x-ray view&quot;
      style=&quot;width: 288px; height: 269px&quot; /&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></blockquote>

<br style="clear:both">
  
<h3>Custom lens size</h3>

<p id="lenssize">
  With the general HTML pattern, you can specify a custom width and height for the magnifer lens.
  The Chandra galaxy example above uses a lens that is 100 x 75 pixels.
</p>

<p>If you want to change the default lens size, edit this code in <strong>magnifier.css</strong>:
</p>

<blockquote><pre>.maglens {
  position: absolute;
  overflow: hidden;
  width: 150px;
  height: 150px;
}</pre></blockquote>

<h3>Overlapping Images</h3>

<p>
  If images overlap, perhaps because of a reduced window size, the "top" image will
  get the magnifier lens. [Source example from 
  <a href="https://lirr.potomac-nmra.org/Main/LIRRHome.php" target="_blank">Marshall Abrams</a>.]
</p>

<div style="float:left; margin:5px; width:45%">
  <h4>Car Float Yard</h4>
  <div class="magnifier" style="height: 297px; width: 512px">
    <div class="maglens"> 
      <img src="carfloat-lg.JPG" class="maglarge" alt="Car Float"
           style="height: 560px; width: 964px; display: none;"> 
    </div>
  </div>
  <p>
    The Long Island Rail
    Road had two car float yards. One was in Bay Ridge in the Borough of
    Brooklyn, and the other was in Long Island City in the Borough of
    Queens. There were no railroad bridges from the mainland onto Long
    Island. Before the car float yards, freight traffic from the mainland
    had to travel up the west side of the Hudson River, cross the river
    around Albany, and then travel down to Long Island along the east side
    of he Hudson River.
  </p>
</div>

<div style="float:left; margin:5px; width:50%">
  <h4>New York City</h4>
  <div class="magnifier" style="height: 297px; width: 475px">
    <div class="maglens"> 
      <img src="PennSta-lg.jpeg" class="maglarge" alt="Pennsylvania Station" 
           style="height: 500px; width: 800px; display: none;"> 
    </div>
  </div>
  <p>
    Up
    until 2005, Jamaica was the terminus of my layout. In 2005 I gained
    access to a smaller room in the basement in which I could model New
    York City. My intent was to model Pennsylvania&nbsp; Station,
    including the LIRR ticket booths an the shopping plaza below Penn
    Station, and the LIRR’s underground tracks below the shopping plaza. I
    also wanted to capture the “canyons” of NYC, so-called because of the
    skyscrapers that rise up on each side of the Manhattan streets.
  </p>
</div>

<br style="clear:both">

<h2><a name="debugging">Troubleshooting</a></h2>

<p>
If no magnifier appears when you roll over your images,
or the magnifier is distorted or off-center, 
<a href="https://javascript.info/devtools" target="_blank">
open the browser console window</a>. Reload the page.
If there are any errors, fix them.
</p>

<p>
  If there are no errors, but magnifiers are still not working,
  try entering the following in the browser console.</p>

<blockquote><pre>MAGNIFIER</pre></blockquote>

<p>
  If this is undefined,
  there was a problem loading the Javascript. Make sure the file has been
  properly uploaded to your server, 
  and that your HTML contains <a href="#loadmag">the correct code for loading
  it</a>.
</p>

<blockquote><pre>MAGNIFIER.data().length</pre></blockquote>

<p>
  If this returns zero, it means no images with magnifiers were found. 
  Perhaps your images were not marked up correctly. 
  Compare your HTML against the samples above. Validate
  your HTML, using tools such as the W3C
  <a href="https://validator.w3.org/" target="_blank">HTML checker</a>.
  If you have a CSS stylesheet, use
  <a href="https://jigsaw.w3.org/css-validator/" target="_blank">CSS checker</a>.
</p>

<h2>How it works</h2>

<p>
  The "magnifier lens" is a <code>DIV</code> that contains
  the image with the class <code>maglarge</code>. The lens is
  invisible by default, so the only thing you see is the image
  in the outer <code>DIV</code> with the class <code>magnifier</code>.
</p>

<p>
  When the mouse cursor is over a point in a visible image with a magnifier, 
  JavaScript code centers the lens <code>DIV </code> on that point,
  centers hidden image to align the corresponding point of the hidden image,
  and unhides the lens.
  As the cursor moves, automatic re-centering gives the
  illusion of magnifying the visible image.
</p>

<hr />

<p>Send comments to <a href="mailto:Chris.Riesbeck@gmail.com">Chris.Riesbeck@gmail.com</a></p>

<hr />

<p>
<a href="https://validator.w3.org/check?uri=http%3A%2F%2Fwww.cs.northwestern.edu%2F~riesbeck%2Fdemo%2Fmagnifier_v3%2Fmagnifier.html"><img
    src="https://www.w3.org/Icons/valid-xhtml10-blue"
    alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>

<a href="https://jigsaw.w3.org/css-validator/validator?profile=css2&amp;warning=2&amp;uri=http%3A%2F%2Fwww.cs.northwestern.edu%2F~riesbeck%2Fdemo%2Fmagnifier_v3%2Fmagnifier.html">
    <img style="border:0;width:88px;height:31px"
        src="https://jigsaw.w3.org/css-validator/images/vcss"
        alt="Valid CSS!" /></a> <em>CSS valid except for commas in clip, required by Internet Explorer</em>
</p>

<script type="text/javascript" src="magnifier.js"></script>
       
</body>
</html>


